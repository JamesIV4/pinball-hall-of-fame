(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(5580)}])},5580:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var t=s(5893),l=s(7294),r=s(9828);function n(e){let{view:a,setView:s}=e,r=(0,l.useRef)(null),n=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{[r,n].forEach(a=>{var s;(null===(s=a.current)||void 0===s?void 0:s.open)&&!a.current.contains(e.target)&&(a.current.open=!1)})};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);let c=function(e,l,r,n){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,t.jsxs)("button",{onClick:()=>{s(e),(null==n?void 0:n.current)&&(n.current.open=!1)},className:"nav-button flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors hover:bg-amber-500 hover:text-black ".concat(a===e?"active":""," ").concat(c),children:[(0,t.jsx)("i",{className:"fas fa-".concat(l)})," ",r]})},d="absolute z-20 top-full left-1/2 -translate-x-1/2 mt-1 min-w-[12rem] max-w-[90vw] w-max flex flex-col gap-2 bg-gray-700 p-2 rounded-lg shadow-lg";return(0,t.jsx)("nav",{className:"mb-8",children:(0,t.jsxs)("ul",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,t.jsx)("li",{children:c("home","home","Home")}),(0,t.jsx)("li",{className:"relative",children:(0,t.jsxs)("details",{ref:r,className:"group",children:[(0,t.jsxs)("summary",{className:"nav-button flex items-center justify-between px-4 py-2 rounded-lg font-semibold transition-colors hover:bg-amber-500 hover:text-black cursor-pointer select-none ".concat(["addMachine","addPlayer","addScore","manageScores"].includes(a)?"active":""),children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("i",{className:"fas fa-wrench mr-2"}),"Manage"]}),(0,t.jsx)("i",{className:"fas fa-chevron-down ml-2 transition-transform group-open:rotate-180"})]}),(0,t.jsxs)("div",{className:d,children:[c("addMachine","gamepad","Add Machine",r,"text-left"),c("addPlayer","user-plus","Add Player",r,"text-left"),c("addScore","star","Add Score",r,"text-left"),c("manageScores","trash","Manage Scores",r,"text-left")]})]})}),(0,t.jsx)("li",{className:"relative",children:(0,t.jsxs)("details",{ref:n,className:"group",children:[(0,t.jsxs)("summary",{className:"nav-button flex items-center justify-between px-4 py-2 rounded-lg font-semibold transition-colors hover:bg-amber-500 hover:text-black cursor-pointer select-none ".concat(["highScores","scoresByPlayer","allScores"].includes(a)?"active":""),children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("i",{className:"fas fa-trophy mr-2"}),"Scores"]}),(0,t.jsx)("i",{className:"fas fa-chevron-down ml-2 transition-transform group-open:rotate-180"})]}),(0,t.jsxs)("div",{className:d,children:[c("highScores","trophy","High Scores",n,"text-left"),c("scoresByPlayer","user-astronaut","By Player",n,"text-left"),c("allScores","list","All Scores",n,"text-left")]})]})})]})})}function c(e){let{totalMachines:a,totalPlayers:s}=e;return(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Welcome!"}),(0,t.jsx)("p",{className:"text-gray-300",children:"Use the navigation above to manage machines, players & high scores."}),(0,t.jsxs)("div",{className:"mt-6 flex justify-center gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xl font-bold",children:a}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Machines"})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xl font-bold",children:s}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Players"})]})]})]})}function d(e){let{message:a,type:s="success",clear:r}=e;return((0,l.useEffect)(()=>{if(!a)return;let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[a,r]),a)?(0,t.jsx)("div",{className:"fixed bottom-5 right-5 px-4 py-2 rounded-lg shadow-lg text-white ".concat("success"===s?"bg-green-500":"bg-red-500"),children:a}):null}var i=s(3977);let o={apiKey:"AIzaSyCbX8ZHBNMyOgyFHlgFNKi_Nd2mxQYEvuQ",authDomain:"pinball-hall-of-fame.firebaseapp.com",projectId:"pinball-hall-of-fame",storageBucket:"pinball-hall-of-fame.firebasestorage.app",messagingSenderId:"813910427142",appId:"1:813910427142:web:e0f57df2f2c39224746587"};function m(){let e=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)(o),a=(0,r.ad)(e);return{app:e,db:a}}function x(){let{db:e}=m(),[a,s]=(0,l.useState)(""),[n,c]=(0,l.useState)(""),[i,o]=(0,l.useState)([]),[x,h]=(0,l.useState)(""),[g,u]=(0,l.useState)(""),[p,b]=(0,l.useState)(""),[f,j]=(0,l.useState)({msg:""});async function y(t){t.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/machines/machines"),{name:a,image:n}),j({msg:"Machine added!"}),s(""),c("")}catch(e){console.error(e),j({msg:"Error adding machine",type:"error"})}}async function N(a){let s=i.find(e=>e.id===a),t=null==s?void 0:s.name;try{if(await (0,r.r7)((0,r.JU)(e,"data/machines/machines",a),{name:g,image:p}),t&&t!==g){let a=await (0,r.PL)((0,r.hJ)(e,"data/players/players")),s=[];a.docs.forEach(a=>{let l=a.data();if(l.scores&&l.scores[t]){let n={...l.scores};n[g]=n[t],delete n[t],s.push((0,r.r7)((0,r.JU)(e,"data/players/players",a.id),{scores:n}))}}),s.length>0&&await Promise.all(s)}h(""),j({msg:"Machine updated!"})}catch(e){console.error(e),j({msg:"Error updating machine",type:"error"})}}return(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{o(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{message:f.msg,type:f.type,clear:()=>j({msg:""})}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Pinball Machine"}),(0,t.jsxs)("form",{onSubmit:y,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Machine Name"}),(0,t.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Image URL (optional)"}),(0,t.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:n,onChange:e=>c(e.target.value)})]}),(0,t.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Machine"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto mt-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Edit Machines"}),(0,t.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,t.jsx)("div",{className:"bg-gray-700 p-3 rounded",children:x===e.id?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{className:"w-full p-2 rounded bg-gray-600",placeholder:"Machine Name",value:g,onChange:e=>u(e.target.value)}),(0,t.jsx)("input",{className:"w-full p-2 rounded bg-gray-600",placeholder:"Image URL (optional)",value:p,onChange:e=>b(e.target.value)}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",onClick:()=>N(e.id),children:"Save"}),(0,t.jsx)("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",onClick:()=>h(""),children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.image&&(0,t.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-16 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-semibold truncate",title:e.name,children:e.name}),e.image&&(0,t.jsx)("div",{className:"text-xs text-gray-400 truncate",title:e.image,children:e.image})]}),(0,t.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:()=>{h(e.id),u(e.name),b(e.image||"")},children:"Edit"})]})},e.id))})]})]})}function h(){let{db:e}=m(),[a,s]=(0,l.useState)(""),[n,c]=(0,l.useState)([]),[i,o]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[g,u]=(0,l.useState)({msg:""});async function p(t){t.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/players/players"),{name:a,scores:{}}),u({msg:"Player added!"}),s("")}catch(e){console.error(e),u({msg:"Error adding player",type:"error"})}}async function b(a){try{await (0,r.r7)((0,r.JU)(e,"data/players/players",a),{name:x}),o(""),u({msg:"Player name updated!"})}catch(e){console.error(e),u({msg:"Error updating player",type:"error"})}}return(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{message:g.msg,type:g.type,clear:()=>u({msg:""})}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Player"}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Player Name"}),(0,t.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,t.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Player"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto mt-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Edit Players"}),(0,t.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,t.jsx)("div",{className:"flex items-center gap-2 bg-gray-700 p-2 rounded",children:i===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{className:"flex-1 p-1 rounded bg-gray-600",value:x,onChange:e=>h(e.target.value)}),(0,t.jsx)("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",onClick:()=>b(e.id),children:"Save"}),(0,t.jsx)("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",onClick:()=>o(""),children:"Cancel"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1",children:e.name}),(0,t.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:()=>{o(e.id),h(e.name)},children:"Edit"})]})},e.id))})]})]})}function g(){let{db:e}=m(),[a,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[i,o]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[g,u]=(0,l.useState)(""),[p,b]=(0,l.useState)({msg:""});async function f(a){if(a.preventDefault(),i&&x&&g)try{await (0,r.r7)((0,r.JU)(e,"data/players/players",x),{["scores.".concat(i)]:(0,r.vr)(Number(g))}),b({msg:"Score added!"}),o(""),h(""),u("")}catch(e){console.error(e),b({msg:"Error adding score",type:"error"})}}return(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),t()}},[e]),(0,l.useEffect)(()=>{!i&&a.length>0&&o(a[0].name)},[a,i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{message:p.msg,type:p.type,clear:()=>b({msg:""})}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a High Score"}),(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Machine"}),(0,t.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:i,onChange:e=>o(e.target.value),required:!0,children:[(0,t.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Player"}),(0,t.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:x,onChange:e=>h(e.target.value),required:!0,children:[(0,t.jsx)("option",{value:"",children:"-- select --"}),n.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"Score"}),(0,t.jsx)("input",{type:"number",className:"w-full p-2 rounded-lg bg-gray-700",value:g,onChange:e=>u(e.target.value),required:!0})]}),(0,t.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Score"})]})]})]})}function u(){let{db:e}=m(),[a,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[i,o]=(0,l.useState)({msg:""});async function x(a,s,t){try{await (0,r.r7)((0,r.JU)(e,"data/players/players",a),{["scores.".concat(s)]:(0,r.Ab)(t)}),o({msg:"Score deleted!"})}catch(e){console.error(e),o({msg:"Error deleting score",type:"error"})}}return(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),t()}},[e]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{message:i.msg,type:i.type,clear:()=>o({msg:""})}),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-amber-400",children:"Manage Scores"}),0===n.length?(0,t.jsx)("p",{className:"text-gray-400",children:"No players found."}):(0,t.jsx)("div",{className:"space-y-8",children:n.map(e=>{let s=Object.keys(e.scores||{}).sort();return 0===s.length?(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-gray-400",children:"No scores recorded yet."})]},e.id):(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-4",children:e.name}),(0,t.jsx)("div",{className:"space-y-4",children:s.map(s=>{var l;let r=a.find(e=>e.name===s),n=[...(null===(l=e.scores)||void 0===l?void 0:l[s])||[]].sort((e,a)=>a-e);return(0,t.jsxs)("div",{className:"bg-gray-600 p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(null==r?void 0:r.image)&&(0,t.jsx)("img",{src:r.image,alt:s,className:"w-12 h-16 object-cover rounded-md mr-3"}),(0,t.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:s})]}),(0,t.jsx)("div",{className:"space-y-1",children:n.map((a,l)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"md:text-[23px] font-bold mr-3 w-6 ml-2",children:[l+1,"."]}),(0,t.jsx)("span",{className:"font-dotmatrix text-[36px] md:text-[51px] text-amber-300",children:a.toLocaleString()})]}),(0,t.jsx)("button",{onClick:()=>x(e.id,s,a),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-semibold transition-colors",children:"Delete"})]},l))})]},s)})})]},e.id)})})]})]})}function p(){let{db:e}=m(),[a,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[d,i]=(0,l.useState)(""),[o,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),t()}},[e]),(0,l.useEffect)(()=>{!d&&a.length&&i(a[0].name)},[a,d]);let h=n.flatMap(e=>{var a;return((null===(a=e.scores)||void 0===a?void 0:a[d])||[]).map(a=>({player:e.name,score:a}))}),g=h;if(o){let e=new Map;for(let{player:a,score:s}of h)(!e.has(a)||s>e.get(a))&&e.set(a,s);g=Array.from(e.entries()).map(e=>{let[a,s]=e;return{player:a,score:s}})}g.sort((e,a)=>a.score-e.score);let u=a.find(e=>e.name===d);return(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Machine"}),(0,t.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-4",value:d,onChange:e=>i(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-gray-200 mb-6",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 accent-amber-500",checked:o,onChange:e=>x(e.target.checked)}),"Show best score per player only"]}),d&&(g.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(null==u?void 0:u.image)&&(0,t.jsx)("img",{src:u.image,alt:"machine",className:"w-24 h-32 object-cover rounded-lg mr-4"}),(0,t.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:[d," â€“ High Scores"]})]}),(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-700",children:[(0,t.jsx)("th",{className:"p-3",children:"Rank"}),(0,t.jsx)("th",{className:"p-3",children:"Player"}),(0,t.jsx)("th",{className:"p-3 text-right",children:"Score"})]})}),(0,t.jsx)("tbody",{children:g.map((e,a)=>(0,t.jsxs)("tr",{className:a%2?"bg-gray-700/50":"bg-gray-800/50",children:[(0,t.jsx)("td",{className:"pl-6 font-bold",children:a+1}),(0,t.jsx)("td",{className:"p-3",children:e.player}),(0,t.jsx)("td",{className:"p-3 text-right font-dotmatrix text-[36px] md:text-[51px] text-amber-300",children:e.score.toLocaleString()})]},a))})]})]}):(0,t.jsx)("p",{className:"text-gray-400",children:"No scores recorded for this machine yet."}))]})}function b(){let{db:e}=m(),[a,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[d,i]=(0,l.useState)("");(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>s(e.docs.map(e=>({id:e.id,...e.data()})))),t=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>c(e.docs.map(e=>({id:e.id,...e.data()}))));return()=>{a(),t()}},[e]),(0,l.useEffect)(()=>{!d&&n.length&&i(n[0].id)},[n,d]);let o=n.find(e=>e.id===d),x=Object.keys((null==o?void 0:o.scores)||{}).sort();return(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Player"}),(0,t.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-6",value:d,onChange:e=>i(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- select --"}),n.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),d&&(x.length?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:["Scores for ",null==o?void 0:o.name]}),x.map(e=>{var s;let l=a.find(a=>a.name===e),r=[...(null==o?void 0:null===(s=o.scores)||void 0===s?void 0:s[e])||[]].sort((e,a)=>a-e);return(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(null==l?void 0:l.image)&&(0,t.jsx)("img",{src:l.image,alt:e,className:"w-16 h-20 object-cover rounded-md mr-4"}),(0,t.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:e})]}),(0,t.jsx)("div",{className:"space-y-1",children:r.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"md:text-[23px] font-bold mr-3 w-6 ml-2",children:[a+1,"."]}),(0,t.jsx)("span",{className:"font-dotmatrix text-[36px] md:text-[51px] text-amber-300",children:e.toLocaleString()})]},a))})]},e)})]}):(0,t.jsxs)("p",{className:"text-gray-400",children:["No scores recorded for ",null==o?void 0:o.name," yet."]}))]})}function f(){let{db:e}=m(),[a,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),t()}},[e]),(0,t.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-amber-400",children:"All Scores"}),0===n.length?(0,t.jsx)("p",{className:"text-gray-400",children:"No players found."}):(0,t.jsx)("div",{className:"space-y-8",children:n.map(e=>{let s=Object.keys(e.scores||{}).sort();return 0===s.length?(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-gray-400",children:"No scores recorded yet."})]},e.id):(0,t.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-4",children:e.name}),(0,t.jsx)("div",{className:"space-y-4",children:s.map(s=>{var l;let r=a.find(e=>e.name===s),n=[...(null===(l=e.scores)||void 0===l?void 0:l[s])||[]].sort((e,a)=>a-e);return(0,t.jsxs)("div",{className:"bg-gray-600 p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(null==r?void 0:r.image)&&(0,t.jsx)("img",{src:r.image,alt:s,className:"w-12 h-16 object-cover rounded-md mr-3"}),(0,t.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:s})]}),(0,t.jsx)("div",{className:"space-y-1",children:n.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"md:text-[23px] font-bold mr-3 w-6 ml-2",children:[a+1,"."]}),(0,t.jsx)("span",{className:"font-dotmatrix text-[36px] md:text-[51px] text-amber-300",children:e.toLocaleString()})]},a))})]},s)})})]},e.id)})})]})}function j(){let[e,a]=(0,l.useState)("home"),{db:s}=m(),[d,i]=(0,l.useState)(0),[o,j]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=(0,r.cf)((0,r.hJ)(s,"data/machines/machines"),e=>i(e.size)),a=(0,r.cf)((0,r.hJ)(s,"data/players/players"),e=>j(e.size));return()=>{e(),a()}},[s]),(0,t.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,t.jsxs)("header",{className:"text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-amber-400 tracking-wider",children:"Pinball Hall of Fame"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Track your high scores and dominate the silver ball!"})]}),(0,t.jsx)(n,{view:e,setView:a}),"home"===e&&(0,t.jsx)(c,{totalMachines:d,totalPlayers:o}),"addMachine"===e&&(0,t.jsx)(x,{}),"addPlayer"===e&&(0,t.jsx)(h,{}),"addScore"===e&&(0,t.jsx)(g,{}),"manageScores"===e&&(0,t.jsx)(u,{}),"highScores"===e&&(0,t.jsx)(p,{}),"scoresByPlayer"===e&&(0,t.jsx)(b,{}),"allScores"===e&&(0,t.jsx)(f,{})]})}}},function(e){e.O(0,[16,233,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);