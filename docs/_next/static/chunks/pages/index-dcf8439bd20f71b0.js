(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8083)}])},8083:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var l=s(5893),t=s(7294),r=s(9828);function c(e){let{view:a,setView:s}=e,t=(e,t,r)=>(0,l.jsxs)("button",{onClick:()=>s(e),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors hover:bg-amber-500 hover:text-black ".concat(a===e?"bg-amber-400 text-black":""),children:[(0,l.jsx)("i",{className:"fas fa-".concat(t)})," ",r]});return(0,l.jsxs)("nav",{className:"mb-8 space-y-2",children:[(0,l.jsx)("div",{className:"flex justify-center",children:t("home","home","Home")}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[t("addMachine","gamepad","Machines"),t("addPlayer","user-plus","Players"),t("addScore","star","Add Score")]}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[t("scoresByMachine","trophy","Scores by Machine"),t("scoresByPlayer","user-astronaut","Scores by Player"),t("allScores","list","All Scores")]})]})}function n(e){let{totalMachines:a,totalPlayers:s}=e;return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Welcome!"}),(0,l.jsx)("p",{className:"text-gray-300",children:"Use the navigation above to manage machines, players & high scores."}),(0,l.jsxs)("div",{className:"mt-6 flex justify-center gap-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,l.jsx)("p",{className:"text-xl font-bold",children:a}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Machines"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,l.jsx)("p",{className:"text-xl font-bold",children:s}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Players"})]})]})]})}function d(e){let{message:a,type:s="success",clear:r}=e;return((0,t.useEffect)(()=>{if(!a)return;let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[a,r]),a)?(0,l.jsx)("div",{className:"fixed bottom-5 right-5 px-4 py-2 rounded-lg shadow-lg text-white ".concat("success"===s?"bg-green-500":"bg-red-500"),children:a}):null}var i=s(3977);let o={apiKey:"AIzaSyCbX8ZHBNMyOgyFHlgFNKi_Nd2mxQYEvuQ",authDomain:"pinball-hall-of-fame.firebaseapp.com",projectId:"pinball-hall-of-fame",storageBucket:"pinball-hall-of-fame.firebasestorage.app",messagingSenderId:"813910427142",appId:"1:813910427142:web:e0f57df2f2c39224746587"};function m(){let e=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)(o),a=(0,r.ad)(e);return{app:e,db:a}}function h(){let{db:e}=m(),[a,s]=(0,t.useState)(""),[c,n]=(0,t.useState)(""),[i,o]=(0,t.useState)([]),[h,x]=(0,t.useState)(""),[g,u]=(0,t.useState)(""),[p,b]=(0,t.useState)(""),[j,y]=(0,t.useState)({msg:""});async function f(l){l.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/machines/machines"),{name:a,image:c}),y({msg:"Machine added!"}),s(""),n("")}catch(e){console.error(e),y({msg:"Error adding machine",type:"error"})}}async function N(a){let s=i.find(e=>e.id===a),l=null==s?void 0:s.name;try{if(await (0,r.r7)((0,r.JU)(e,"data/machines/machines",a),{name:g,image:p}),l&&l!==g){let a=await (0,r.PL)((0,r.hJ)(e,"data/players/players")),s=[];a.docs.forEach(a=>{let t=a.data();if(t.scores&&t.scores[l]){let c={...t.scores};c[g]=c[l],delete c[l],s.push((0,r.r7)((0,r.JU)(e,"data/players/players",a.id),{scores:c}))}}),s.length>0&&await Promise.all(s)}x(""),y({msg:"Machine updated!"})}catch(e){console.error(e),y({msg:"Error updating machine",type:"error"})}}return(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{o(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:j.msg,type:j.type,clear:()=>y({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Pinball Machine"}),(0,l.jsxs)("form",{onSubmit:f,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Machine Name"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Image URL (optional)"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:c,onChange:e=>n(e.target.value)})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Machine"})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto mt-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Edit Machines"}),(0,l.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,l.jsx)("div",{className:"bg-gray-700 p-3 rounded",children:h===e.id?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("input",{className:"w-full p-2 rounded bg-gray-600",placeholder:"Machine Name",value:g,onChange:e=>u(e.target.value)}),(0,l.jsx)("input",{className:"w-full p-2 rounded bg-gray-600",placeholder:"Image URL (optional)",value:p,onChange:e=>b(e.target.value)}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",onClick:()=>N(e.id),children:"Save"}),(0,l.jsx)("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",onClick:()=>x(""),children:"Cancel"})]})]}):(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[e.image&&(0,l.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-16 object-cover rounded"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-semibold",children:e.name}),e.image&&(0,l.jsx)("div",{className:"text-xs text-gray-400 truncate",children:e.image})]}),(0,l.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:()=>{x(e.id),u(e.name),b(e.image||"")},children:"Edit"})]})},e.id))})]})]})}function x(){let{db:e}=m(),[a,s]=(0,t.useState)(""),[c,n]=(0,t.useState)([]),[i,o]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[g,u]=(0,t.useState)({msg:""});async function p(l){l.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/players/players"),{name:a,scores:{}}),u({msg:"Player added!"}),s("")}catch(e){console.error(e),u({msg:"Error adding player",type:"error"})}}async function b(a){try{await (0,r.r7)((0,r.JU)(e,"data/players/players",a),{name:h}),o(""),u({msg:"Player name updated!"})}catch(e){console.error(e),u({msg:"Error updating player",type:"error"})}}return(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:g.msg,type:g.type,clear:()=>u({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Player"}),(0,l.jsxs)("form",{onSubmit:p,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Player Name"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Player"})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto mt-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Edit Players"}),(0,l.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,l.jsx)("div",{className:"flex items-center gap-2 bg-gray-700 p-2 rounded",children:i===e.id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{className:"flex-1 p-1 rounded bg-gray-600",value:h,onChange:e=>x(e.target.value)}),(0,l.jsx)("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",onClick:()=>b(e.id),children:"Save"}),(0,l.jsx)("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",onClick:()=>o(""),children:"Cancel"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"flex-1",children:e.name}),(0,l.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:()=>{o(e.id),x(e.name)},children:"Edit"})]})},e.id))})]})]})}function g(){let{db:e}=m(),[a,s]=(0,t.useState)([]),[c,n]=(0,t.useState)([]),[i,o]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[g,u]=(0,t.useState)(""),[p,b]=(0,t.useState)({msg:""});async function j(a){if(a.preventDefault(),i&&h&&g)try{await (0,r.r7)((0,r.JU)(e,"data/players/players",h),{["scores.".concat(i)]:(0,r.vr)(Number(g))}),b({msg:"Score added!"}),o(""),x(""),u("")}catch(e){console.error(e),b({msg:"Error adding score",type:"error"})}}return(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:p.msg,type:p.type,clear:()=>b({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a High Score"}),(0,l.jsxs)("form",{onSubmit:j,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Machine"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:i,onChange:e=>o(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Player"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:h,onChange:e=>x(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),c.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Score"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 rounded-lg bg-gray-700",value:g,onChange:e=>u(e.target.value),required:!0})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Score"})]})]})]})}function u(){let{db:e}=m(),[a,s]=(0,t.useState)([]),[c,n]=(0,t.useState)([]),[d,i]=(0,t.useState)("");(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]);let o=c.flatMap(e=>{var a;return((null===(a=e.scores)||void 0===a?void 0:a[d])||[]).map(a=>({player:e.name,score:a}))});o.sort((e,a)=>a.score-e.score);let h=a.find(e=>e.name===d);return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Machine"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-6",value:d,onChange:e=>i(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]}),d&&(o.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(null==h?void 0:h.image)&&(0,l.jsx)("img",{src:h.image,alt:"machine",className:"w-24 h-32 object-cover rounded-lg mr-4"}),(0,l.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:[d," â€“\xa0High Scores"]})]}),(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-700",children:[(0,l.jsx)("th",{className:"p-3",children:"Rank"}),(0,l.jsx)("th",{className:"p-3",children:"Player"}),(0,l.jsx)("th",{className:"p-3 text-right",children:"Score"})]})}),(0,l.jsx)("tbody",{children:o.map((e,a)=>(0,l.jsxs)("tr",{className:a%2?"bg-gray-700/50":"bg-gray-800/50",children:[(0,l.jsx)("td",{className:"p-3 font-bold",children:a+1}),(0,l.jsx)("td",{className:"p-3",children:e.player}),(0,l.jsx)("td",{className:"p-3 text-right font-arcade text-[28px] text-amber-300",children:e.score.toLocaleString()})]},a))})]})]}):(0,l.jsx)("p",{className:"text-gray-400",children:"No scores recorded for this machine yet."}))]})}function p(){let{db:e}=m(),[a,s]=(0,t.useState)([]),[c,n]=(0,t.useState)([]),[d,i]=(0,t.useState)("");(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]);let o=c.find(e=>e.id===d),h=Object.keys((null==o?void 0:o.scores)||{}).sort();return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Player"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-6",value:d,onChange:e=>i(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),c.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),d&&(h.length?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:["Scores for ",null==o?void 0:o.name]}),h.map(e=>{var s;let t=a.find(a=>a.name===e),r=[...(null==o?void 0:null===(s=o.scores)||void 0===s?void 0:s[e])||[]].sort((e,a)=>a-e);return(0,l.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center mb-3",children:[(null==t?void 0:t.image)&&(0,l.jsx)("img",{src:t.image,alt:e,className:"w-16 h-20 object-cover rounded-md mr-4"}),(0,l.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:e})]}),(0,l.jsx)("ul",{className:"list-decimal list-inside space-y-1",children:r.map((e,a)=>(0,l.jsx)("li",{className:"font-arcade text-[28px]",children:e.toLocaleString()},a))})]},e)})]}):(0,l.jsxs)("p",{className:"text-gray-400",children:["No scores recorded for ",null==o?void 0:o.name," yet."]}))]})}function b(){let{db:e}=m(),[a,s]=(0,t.useState)([]),[c,n]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-amber-400",children:"All Scores"}),0===c.length?(0,l.jsx)("p",{className:"text-gray-400",children:"No players found."}):(0,l.jsx)("div",{className:"space-y-8",children:c.map(e=>{let s=Object.keys(e.scores||{}).sort();return 0===s.length?(0,l.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-2",children:e.name}),(0,l.jsx)("p",{className:"text-gray-400",children:"No scores recorded yet."})]},e.id):(0,l.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-amber-300 mb-4",children:e.name}),(0,l.jsx)("div",{className:"space-y-4",children:s.map(s=>{var t;let r=a.find(e=>e.name===s),c=[...(null===(t=e.scores)||void 0===t?void 0:t[s])||[]].sort((e,a)=>a-e);return(0,l.jsxs)("div",{className:"bg-gray-600 p-3 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center mb-3",children:[(null==r?void 0:r.image)&&(0,l.jsx)("img",{src:r.image,alt:s,className:"w-12 h-16 object-cover rounded-md mr-3"}),(0,l.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:s})]}),(0,l.jsx)("ul",{className:"list-decimal list-inside space-y-1",children:c.map((e,a)=>(0,l.jsx)("li",{className:"font-arcade text-[28px]",children:e.toLocaleString()},a))})]},s)})})]},e.id)})})]})}function j(){let[e,a]=(0,t.useState)("home"),{db:s}=m(),[d,i]=(0,t.useState)(0),[o,j]=(0,t.useState)(0);return(0,t.useEffect)(()=>{let e=(0,r.cf)((0,r.hJ)(s,"data/machines/machines"),e=>i(e.size)),a=(0,r.cf)((0,r.hJ)(s,"data/players/players"),e=>j(e.size));return()=>{e(),a()}},[s]),(0,l.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,l.jsxs)("header",{className:"text-center mb-6",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-amber-400 tracking-wider",children:"Pinball Hall of Fame"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Track your high scores and dominate the silver ball!"})]}),(0,l.jsx)(c,{view:e,setView:a}),"home"===e&&(0,l.jsx)(n,{totalMachines:d,totalPlayers:o}),"addMachine"===e&&(0,l.jsx)(h,{}),"addPlayer"===e&&(0,l.jsx)(x,{}),"addScore"===e&&(0,l.jsx)(g,{}),"scoresByMachine"===e&&(0,l.jsx)(u,{}),"scoresByPlayer"===e&&(0,l.jsx)(p,{}),"allScores"===e&&(0,l.jsx)(b,{})]})}}},function(e){e.O(0,[16,233,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);