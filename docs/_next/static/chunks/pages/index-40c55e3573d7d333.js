(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8510)}])},8510:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var l=s(5893),t=s(7294),r=s(9828);function n(e){let{view:a,setView:s}=e,t=(e,t,r)=>(0,l.jsxs)("button",{onClick:()=>s(e),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors hover:bg-amber-500 hover:text-black ".concat(a===e?"bg-amber-400 text-black":""),children:[(0,l.jsx)("i",{className:"fas fa-".concat(t)})," ",r]});return(0,l.jsxs)("nav",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[t("home","home","Home"),t("addMachine","gamepad","Add Machine"),t("addPlayer","user-plus","Add Player"),t("addScore","star","Add Score"),t("scoresByMachine","trophy","Scores by Machine"),t("scoresByPlayer","user-astronaut","Scores by Player")]})}function c(e){let{totalMachines:a,totalPlayers:s}=e;return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Welcome!"}),(0,l.jsx)("p",{className:"text-gray-300",children:"Use the navigation above to manage machines, players & high scores."}),(0,l.jsxs)("div",{className:"mt-6 flex justify-center gap-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,l.jsx)("p",{className:"text-xl font-bold",children:a}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Machines"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,l.jsx)("p",{className:"text-xl font-bold",children:s}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Players"})]})]})]})}function d(e){let{message:a,type:s="success",clear:r}=e;return((0,t.useEffect)(()=>{if(!a)return;let e=setTimeout(r,3e3);return()=>clearTimeout(e)},[a,r]),a)?(0,l.jsx)("div",{className:"fixed bottom-5 right-5 px-4 py-2 rounded-lg shadow-lg text-white ".concat("success"===s?"bg-green-500":"bg-red-500"),children:a}):null}var i=s(3977),o=s(3454);let m={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID};function h(){let e=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)(m),a=(0,r.ad)(e);return{app:e,db:a}}function u(){let{db:e}=h(),[a,s]=(0,t.useState)(""),[n,c]=(0,t.useState)(""),[i,o]=(0,t.useState)({msg:""});async function m(l){l.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/machines/machines"),{name:a,image:n}),o({msg:"Machine added!"}),s(""),c("")}catch(e){console.error(e),o({msg:"Error adding machine",type:"error"})}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:i.msg,type:i.type,clear:()=>o({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Pinball Machine"}),(0,l.jsxs)("form",{onSubmit:m,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Machine Name"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Image URL (optional)"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:n,onChange:e=>c(e.target.value)})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Machine"})]})]})]})}function x(){let{db:e}=h(),[a,s]=(0,t.useState)(""),[n,c]=(0,t.useState)({msg:""});async function i(l){l.preventDefault();try{await (0,r.ET)((0,r.hJ)(e,"data/players/players"),{name:a,scores:{}}),c({msg:"Player added!"}),s("")}catch(e){console.error(e),c({msg:"Error adding player",type:"error"})}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:n.msg,type:n.type,clear:()=>c({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a New Player"}),(0,l.jsxs)("form",{onSubmit:i,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Player Name"}),(0,l.jsx)("input",{className:"w-full p-2 rounded-lg bg-gray-700",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Player"})]})]})]})}function g(){let{db:e}=h(),[a,s]=(0,t.useState)([]),[n,c]=(0,t.useState)([]),[i,o]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[x,g]=(0,t.useState)(""),[b,p]=(0,t.useState)({msg:""});async function j(a){if(a.preventDefault(),i&&m&&x)try{await (0,r.r7)((0,r.JU)(e,"data/players/players",m),{["scores.".concat(i)]:(0,r.vr)(Number(x))}),p({msg:"Score added!"}),o(""),u(""),g("")}catch(e){console.error(e),p({msg:"Error adding score",type:"error"})}}return(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{message:b.msg,type:b.type,clear:()=>p({msg:""})}),(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"Add a High Score"}),(0,l.jsxs)("form",{onSubmit:j,children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Machine"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:i,onChange:e=>o(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Player"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700",value:m,onChange:e=>u(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),n.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2",children:"Score"}),(0,l.jsx)("input",{type:"number",className:"w-full p-2 rounded-lg bg-gray-700",value:x,onChange:e=>g(e.target.value),required:!0})]}),(0,l.jsx)("button",{className:"w-full bg-amber-500 text-black font-bold py-2 rounded-lg hover:bg-amber-600",children:"Add Score"})]})]})]})}function b(){let{db:e}=h(),[a,s]=(0,t.useState)([]),[n,c]=(0,t.useState)([]),[d,i]=(0,t.useState)("");(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]);let o=n.flatMap(e=>{var a;return((null===(a=e.scores)||void 0===a?void 0:a[d])||[]).map(a=>({player:e.name,score:a}))});o.sort((e,a)=>a.score-e.score);let m=a.find(e=>e.name===d);return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Machine"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-6",value:d,onChange:e=>i(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),a.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]}),d&&(o.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(null==m?void 0:m.image)&&(0,l.jsx)("img",{src:m.image,alt:"machine",className:"w-24 h-32 object-cover rounded-lg mr-4"}),(0,l.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:[d," â€“\xa0High Scores"]})]}),(0,l.jsxs)("table",{className:"w-full text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-700",children:[(0,l.jsx)("th",{className:"p-3",children:"Rank"}),(0,l.jsx)("th",{className:"p-3",children:"Player"}),(0,l.jsx)("th",{className:"p-3 text-right",children:"Score"})]})}),(0,l.jsx)("tbody",{children:o.map((e,a)=>(0,l.jsxs)("tr",{className:a%2?"bg-gray-700/50":"bg-gray-800/50",children:[(0,l.jsx)("td",{className:"p-3 font-bold",children:a+1}),(0,l.jsx)("td",{className:"p-3",children:e.player}),(0,l.jsx)("td",{className:"p-3 text-right font-mono",children:e.score.toLocaleString()})]},a))})]})]}):(0,l.jsx)("p",{className:"text-gray-400",children:"No scores recorded for this machine yet."}))]})}function p(){let{db:e}=h(),[a,s]=(0,t.useState)([]),[n,c]=(0,t.useState)([]),[d,i]=(0,t.useState)("");(0,t.useEffect)(()=>{let a=(0,r.cf)((0,r.hJ)(e,"data/machines/machines"),e=>{s(e.docs.map(e=>({id:e.id,...e.data()})))}),l=(0,r.cf)((0,r.hJ)(e,"data/players/players"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{a(),l()}},[e]);let o=n.find(e=>e.id===d),m=Object.keys((null==o?void 0:o.scores)||{}).sort();return(0,l.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 text-amber-400",children:"High Scores by Player"}),(0,l.jsxs)("select",{className:"w-full p-2 rounded-lg bg-gray-700 mb-6",value:d,onChange:e=>i(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"-- select --"}),n.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),d&&(m.length?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:["Scores for ",null==o?void 0:o.name]}),m.map(e=>{var s;let t=a.find(a=>a.name===e),r=[...(null==o?void 0:null===(s=o.scores)||void 0===s?void 0:s[e])||[]].sort((e,a)=>a-e);return(0,l.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center mb-3",children:[(null==t?void 0:t.image)&&(0,l.jsx)("img",{src:t.image,alt:e,className:"w-16 h-20 object-cover rounded-md mr-4"}),(0,l.jsx)("h4",{className:"text-lg font-semibold text-amber-200",children:e})]}),(0,l.jsx)("ul",{className:"list-decimal list-inside space-y-1",children:r.map((e,a)=>(0,l.jsx)("li",{className:"font-mono",children:e.toLocaleString()},a))})]},e)})]}):(0,l.jsxs)("p",{className:"text-gray-400",children:["No scores recorded for ",null==o?void 0:o.name," yet."]}))]})}function j(){let[e,a]=(0,t.useState)("home"),{db:s}=h(),[d,i]=(0,t.useState)(0),[o,m]=(0,t.useState)(0);return(0,t.useEffect)(()=>{let e=(0,r.cf)((0,r.hJ)(s,"data/machines/machines"),e=>i(e.size)),a=(0,r.cf)((0,r.hJ)(s,"data/players/players"),e=>m(e.size));return()=>{e(),a()}},[s]),(0,l.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,l.jsxs)("header",{className:"text-center mb-6",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-amber-400 tracking-wider",children:"Pinball Hall of Fame"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Track your high scores and dominate the silver ball!"})]}),(0,l.jsx)(n,{view:e,setView:a}),"home"===e&&(0,l.jsx)(c,{totalMachines:d,totalPlayers:o}),"addMachine"===e&&(0,l.jsx)(u,{}),"addPlayer"===e&&(0,l.jsx)(x,{}),"addScore"===e&&(0,l.jsx)(g,{}),"scoresByMachine"===e&&(0,l.jsx)(b,{}),"scoresByPlayer"===e&&(0,l.jsx)(p,{})]})}}},function(e){e.O(0,[16,233,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);